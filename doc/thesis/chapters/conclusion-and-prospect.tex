%%%%%%%%%%%%%%%%%%%%
\chapter{Conclusion and Prospect}
\label{cha:ConclusionAndProspect}

This thesis covers a comprehensive variety of topics, including digital signal processing, system modeling and system design, IP design in different methods, verification, and hardware-software interaction in an actual hardware environment.
The implementation of the FM radio receiver in multiple different methods, namely GNU Radio, Matlab, VHDL and HLS, so that they all achieve the same functionality, is a challenge, especially with the latter methods.
However, this challenge is solved within an end-to-end system design, that strongly supports the development process.\\

GNU Radio is a software, that allows an efficient development of a software-defined radio as a prototype, which can run on actual hardware in a live environment.
It is definitely worth to use it during the development of a project like the one in this thesis, since it allows to achieve a functioning result with relatively low effort.\\

The usage of Matlab as a tool to research DSP algorithms and strategies to demodulate a signal, in order to ultimately find a system model that can be implemented in hardware, turns out to be a powerful asset.
Through short simulation times, it allows the development in fast iterations, which helps to achieve a result quickly.
Based on this system model, the implementation of actual hardware IPs, with VHDL and HLS can be done more efficiently and in a direct way, because issues in the algorithm level are already fixed in the model at this point.
In combination with the simulation testbenches, which share major parts, such as the input source, as well as the analysis tool, the IP development works smoothly and efficiently.
The verification as a comparison against the Matlab system model gives instant feedback of whether the IP functions correctly.
Even if the system model changes, the testbench automatically adapts, since the input source files are re-generated by the model.
These files are picked up at the next execution of the testbench simulation.
Consequently, the hardware engineer can also adapt the IP code accordingly.
Once the IP is deployed on actual hardware, it is tested by the firmware application, in order to check its correct functionality again, which closes the loop from the system model and the IP simulation to the hardware deployment.
This entire process proved itself to be a successful approach.\\

Regarding the implementation of the FM receiver in VHDL and HLS, and their subsequent comparison, the result turns out to be unexpected.
The initial expectation, that HLS may be inefficient in terms of resource utilization, is contradicted.
Also the relatively low amount of time that is required for the implementation, as well as the metric of lines of code, create a positive impression of HLS.
Further, the automatic generation of several files that are required to integrate the IP into a system design, such as interface definitions or software drivers, support this attitude.
VHDL may have its advantages in specific areas of application, but HLS is definitely a powerful tool that can achieve great results in less time.
This is especially true, when it comes to the development of complex functionalities, such as image- or video processing, with the support of built-in libraries like OpenCV.
Furthermore, the project presents a show-case, how HLS enables the concurrent development of a firmware application, which can already interface with the IP and get tested, before any actual hardware is available.\\

However, the often heard statement that HLS enables any software developer to develop hardware IPs, can not be supported.
A developer that writes HLS code, still needs to have a strong hardware background, to be able to understand what is being generated from HLS code in hardware.
It is important to know about the limitations of the target hardware, i.e. FPGA, in order to write an efficient design.
Therefore, the connection between specific HLS \cplusplus\ code lines, as well as the code's general structure and algorithm, and the hardware target need to be understood.\\

In prospect, there are many ideas on how the project can potentially be extended.
Additional implementation methods could be used to develop the FM radio receiver IP.
For example, Matlab can be used to create VHDL code, in a high-level synthesis fashion, which can be used to create the IP.
Regarding the verification environment, also the GNU Radio implementation could be included.
The common input that is produced by the Matlab model, and the common output analysis, which are both used for the VHDL and HLS testbenches, can be used in GNU Radio as well.
This would allow another comparison.
Looking at the HLS code, it could be evaluated how compiler-independent it is.
The question could be, if it is possible to write code that can be compiled with multiple HLS compilers for different target platforms and vendors, e.g. Xilinx and Intel FPGAs, at the same time.
Furthermore, the various optimization strategies that Xilinx HLS provides, could be evaluated on the existing HLS code.
Also, the currently manually implemented functions, such as the FIR filter, could be replaced with built-in library functions.
Finally, the application software could be upgraded from the current bare-metal, real-time OS, to an embedded Linux OS which runs on the ARM CPU.
This would additionally allow the support of the RTL-SDR device to be used for live data streaming, instead of the current replay of the recorded antenna data from the SD card.\\

The amount of ideas for potential extensions to the project shows how comprehensive the project is and how many topics it covers.
Summing up, it can be said, that the project revealed a range of very interesting and partially unexpected insights into multiple topics, and that a lot of knowledge was gained during the elaboration of this thesis.

% NOTES:
%
% Further steps:
%  - generate VHDL from Matlab receiver code
%  - use Matlab Simulink HDL Coder and System Generator
%     as additional implementation variants

%  - use the common input file and feed it to GNU Radio;
%    also produce an output file with GNU Radio for comparison

%  - Develop HLS compiler independent code (optional)}
%    -- Different compilers use different #pragmas, etc.
%    -- These #pragmas need to be within the code, at the appropriate positions,
%       which makes it difficult to write compiler independent code....
%  - use Intel oneAPI HLS compiler
%      -- try to develop compiler-independent code
%      -- how platform-independent is HLS?

%  - explore HLS optimizations
%  - explore HLS libraries (e.g. DSP library --> pre-made FIR filter)

%  - create another IP in the same system
%      -- due to the modular system design this is easy to do
%  - use Linux OS on the SoC, to enable live-data streaming with the RTL-SDR
%
%
%
% ...the list shows how comprehensive the topic of this thesis is.
% Based on the results that were made during the elaboration, many more ideas came into play.
% Many ideas to extend the project, ...
